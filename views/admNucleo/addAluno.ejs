<!doctype html>
<html class="no-js" lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title><%= title %></title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/x-icon" href="/img/favicon.ico">
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,700,900" rel="stylesheet">
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="stylesheet" href="/css/owl.carousel.css">
    <link rel="stylesheet" href="/css/owl.theme.css">
    <link rel="stylesheet" href="/css/owl.transitions.css">
    <link rel="stylesheet" href="/css/animate.css">
    <link rel="stylesheet" href="/css/normalize.css">
    <link rel="stylesheet" href="/css/meanmenu.min.css">
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/educate-custon-icon.css">
    <link rel="stylesheet" href="/css/morrisjs/morris.css">
    <link rel="stylesheet" href="/css/scrollbar/jquery.mCustomScrollbar.min.css">
    <link rel="stylesheet" href="/css/metisMenu/metisMenu.min.css">
    <link rel="stylesheet" href="/css/metisMenu/metisMenu-vertical.css">
    <link rel="stylesheet" href="/css/calendar/fullcalendar.min.css">
    <link rel="stylesheet" href="/css/calendar/fullcalendar.print.min.css">
    <link rel="stylesheet" href="/css/form/all-type-forms.css">
    <link rel="stylesheet" href="/css/dropzone/dropzone.css">
	<link rel="stylesheet" href="/css/notifications/Lobibox.min.css">
    <link rel="stylesheet" href="/css/notifications/notifications.css">
    <link rel="stylesheet" href="/style.css">
    <link rel="stylesheet" href="/css/responsive.css">
    <script src="/js/vendor/modernizr-2.8.3.min.js"></script>
	<style>
		html, body {
		  height: 100%;
		  font-family: 'Roboto', sans-serif;
		  font-weight: 400;
		  background: #E8E9EA;
		}
	</style>
</head>

<body>
    <!--[if lt IE 8]>
		<p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
	<![endif]-->
    <!-- Start Left menu area -->
    <div class="left-sidebar-pro">
        <nav id="sidebar" class="">
            <%- include('./../partials/sidebarAdminNucleo.ejs') %>
        </nav>
    </div>
    <!-- End Left menu area -->
    <!-- Start Welcome area -->
    <div class="all-content-wrapper">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <div class="logo-pro">
                        <a href="/adm/principal/<%= uid_usuario %>"><img class="main-logo" src="/img/logo/logoIbadejuf.png" alt="" /></a>
                    </div>
                </div>
            </div>
        </div>
        <div class="header-advance-area">
            <div class="header-top-area">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                            <div class="header-top-wraper">
                                <div class="row">
                                    <div class="col-lg-1 col-md-0 col-sm-1 col-xs-12">
                                        <div class="menu-switcher-pro">
                                            <button type="button" id="sidebarCollapse" class="btn bar-button-pro header-drl-controller-btn btn-info navbar-btn">
													<i class="educate-icon educate-nav"></i>
												</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Mobile Menu start -->
			<%- include('./../partials/mobile_menu.ejs') %>
            <!-- Mobile Menu end -->
            <div class="breadcome-area">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                            <div class="breadcome-list single-page-breadcome" style="margin-top:-24px;">
                                <div class="row">
                                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12" >
                                        <div class="breadcome-heading" style="margin-top: 15px;font-size: 18px;font-weight: bold;">
                                            Olá <%= user %> seja bem vindo
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                        <ul class="breadcome-menu">
                                            
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Single pro tab review Start-->
        <div class="single-pro-review-area mt-t-30 mg-b-15">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                        <div class="product-payment-inner-st">
							<!--<form role="form" action="/adm/addAluno" method="post" onsubmit="validar()">-->
							<form id="formulario" action="javascript:func()" method="post">
								<input type="hidden" name="uid_usuario" id="uid_usuario" value="<%= uid_usuario %>" >
								<div class="row">
								  <div class="col-md-4 px-1">
									<div class="form-group">
									  <label>Nome <b>*</b></label>
									  <input type="text" class="form-control" placeholder="" name="nome" id="nome"  required>
									</div>
								  </div>
								  <div class="col-md-4 pl-1">
									<div class="form-group">
									  <label for="exampleInputEmail1">Email <b>*</b></label>
									  <input type="text" class="form-control" id="email" name="email" placeholder="" required>
									</div>
								  </div>
								  <div class="col-md-2 pl-1">
									<div class="form-group">
									  <label for="exampleInputEmail1">CPF <b>*</b></label>
									  <input type="text" class="form-control" id="cpf" name="cpf" placeholder="" required>
									</div>
								  </div>
								  
								  <div class="col-md-2 pl-1">
									<div class="form-group">
									  <label for="exampleInputEmail1">RG</label>
									  <input type="text" class="form-control" name="rg" id="rg" placeholder="">
									</div>
								  </div>
								</div>
								<div class="row">
								  <div class="col-md-4 px-1">
									<div class="form-group">
									  <label>Nome Pai</label>
									  <input type="text" class="form-control" placeholder="" id="nome_pai" name="nome_pai" value="">
									</div>
								  </div>
								  <div class="col-md-4 pl-1">
									<div class="form-group">
									  <label>Nome Mãe</label>
									  <input type="text" class="form-control" placeholder="" id="nome_mae" name="nome_mae" value="">
									</div>
								  </div>
								  <div class="col-md-2 pl-1">
									<div class="form-group">
									  <label>Telefone</label>
									  <input type="text" class="form-control" placeholder="" id="telefone" name="telefone" value="">
									</div>
								  </div>
								  <div class="col-md-2 pl-1">
									<div class="form-group">
									  <label>Nascimento</label>
									  <input type="text" class="form-control" placeholder="" id="nascimento"  name="nascimento" value="">
									</div>
								  </div>					
								</div>
								<div class="row">
								  <div class="col-md-3 px-1">
									<div class="form-group">
									  <label>Denominação</label>
									  <input type="text" class="form-control" placeholder="" id="denominacao" name="denominacao" value="">
									</div>
								  </div>
								  <div class="col-md-2 px-1">
									<div class="form-group">
									  <label>Batismo Águas</label>
									  <input type="text" class="form-control" placeholder="" id="data_batismo" name="data_batismo" value="">
									</div>
								  </div>
								  
								  <div class="col-md-3 px-1">
									<div class="form-group">
									  <label>Profissão</label>
									  <input type="text" class="form-control" placeholder="" name="profissao" id="profissao" value="">
									</div>
								  </div>
								  
								  <div class="col-md-3 px-1">
									<div class="form-group">
									  <label>Escolaridade</label>
									  <input type="text" class="form-control" placeholder="" name="escolaridade" id="escolaridade" value="">
									</div>
								  </div>
								  
								</div>
								<div class="row">
								<div class="col-md-3 px-1">
									<div class="form-group">
									  <label>Modalidade</label>
									   <select class="form-control show-tick" name="id_modalidade" id="id_modalidade" required>
										  <option value="0" selected> Selecione </option>
										  <% modalidade.forEach(modalidade=>{ %>
											  <option value="<%=modalidade.id_modalidade %>"> <%=modalidade.descricao %> </option>
											<% }) %>
									  </select>
									</div>
								  </div>
								  
								  <div class="col-md-3 px-1">
									<div class="form-group">
									  <label>Nivel Curso</label>
									   <select class="form-control show-tick" name="id_modulo" id="id_modulo" required>
										  <option value="0" selected> Selecione </option>
										  <% modulo.forEach(modulo=>{ %>
											  <option value="<%=modulo.id_modulo %>"> <%=modulo.descricao %> </option>
											<% }) %>
									  </select>
									</div>
								  </div>

									<div class="col-md-3 px-1">
										<div class="form-group">
											<label>Núcleo</label>
											<select class="form-control show-tick" name="id_modulo" id="id_nucleo" required>
												<option value="0" selected> Selecione </option>
												<% nucleo.forEach(nucleo=>{ %>
												<option value="<%=nucleo.id_nucleo %>"> <%=nucleo.descricao %> </option>
												<% }) %>
											</select>
										</div>
									</div>
									
								  <div class="col-md-3 pr-1">
									<div class="form-group">
									  <label>Naturalidade</label>
									  <input type="text" class="form-control" placeholder="" name="naturalidade" id="naturalidade" value="">
									</div>
								  </div>
								</div>
								<div class="row">
								  <div class="col-md-2 px-1">
									<div class="form-group">
									  <label>CEP</label>
									  <input type="text" class="form-control" name="cep" id="cep" placeholder="" value="">
									</div>
								  </div>
								  <div class="col-md-6 px-1">
									<div class="form-group">
									  <label>Endereço</label>
									  <input type="text" class="form-control" name="endereco" id="endereco" placeholder="" value="">
									</div>
								  </div>
								  
								  <div class="col-md-2 px-1">
									<div class="form-group">
									  <label>Numero</label>
									  <input type="text" class="form-control" name="numero" id="numero" placeholder="" value="">
									</div>
								  </div>
								  
								  <div class="col-md-2 px-1">
									<div class="form-group">
									  <label>Complemento</label>
									  <input type="text" class="form-control" name="complemento"  id="complemento" placeholder="" value="">
									</div>
								  </div>					
								</div>
								<div class="row">
								  <div class="col-md-3 px-1">
									<div class="form-group">
									  <label>Bairro</label>
									  <input type="text" class="form-control" name="bairro" id="bairro" placeholder="" value="">
									</div>
								  </div>
								  <div class="col-md-3 px-1">
									<div class="form-group">
									  <label>Cidade</label>
									  <input type="text" class="form-control" name="cidade" id="cidade" placeholder="" value="">
									</div>
								  </div>
								  
								  <div class="col-md-2 px-1">
									<div class="form-group">
									  <label>UF</label>
									  <input type="text" class="form-control" name="uf"  id="uf" placeholder="" value="">
									</div>
								  </div>		
								</div>
							<div class="row" style="margin-top: 15px;">
							  <div class="update ml-auto mr-auto">
								<button type="submit" class="btn btn-primary btn-round" id="cadAlunoNovo" style="padding-left: 15px;padding-right: 15px;padding-top: 5px;padding-bottom: 5px; font-size: 13px;">Cadastrar</button>
								<button type="reset" class="btn btn-warning btn-round"  style="padding-left: 15px;padding-right: 15px;padding-top: 5px;padding-bottom: 5px; font-size: 13px;">Limpar</button>
							  </div>
							  
							</div>
						  </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
		<!--
        <div class="footer-copyright-area">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                        <div class="footer-copy-right">
                            <p>Copyright © 2018. All rights reserved. Template by <a href="https://colorlib.com/wp/templates/">Colorlib</a></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>-->
    </div>

    <script src="/js/vendor/jquery-1.12.4.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
	 <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js"></script>
    <script src="/js/wow.min.js"></script>
    <script src="/js/jquery-price-slider.js"></script>
    <script src="/js/jquery.meanmenu.js"></script>
    <script src="/js/owl.carousel.min.js"></script>
    <script src="/js/jquery.sticky.js"></script>
    <script src="/js/jquery.scrollUp.min.js"></script>
    <script src="/js/scrollbar/jquery.mCustomScrollbar.concat.min.js"></script>
    <script src="/js/scrollbar/mCustomScrollbar-active.js"></script>
    <script src="/js/metisMenu/metisMenu.min.js"></script>
    <script src="/js/metisMenu/metisMenu-active.js"></script>
    <script src="/js/sparkline/jquery.sparkline.min.js"></script>
    <script src="/js/sparkline/jquery.charts-sparkline.js"></script>
    <script src="/js/calendar/moment.min.js"></script>
    <script src="/js/calendar/fullcalendar.min.js"></script>
    <script src="/js/calendar/fullcalendar-active.js"></script>
    <!--<script src="/js/jquery.maskedinput.min.js"></script>-->
    <script src="/js/masking-active.js"></script>
    <script src="/js/datepicker/jquery-ui.min.js"></script>
    <script src="/js/datepicker/datepicker-active.js"></script>
    <script src="/js/form-validation/jquery.form.min.js"></script>
    <script src="/js/form-validation/jquery.validate.min.js"></script>
    <script src="/js/form-validation/form-active.js"></script>
    <script src="/js/dropzone/dropzone.js"></script>
	<script src="/js/notifications/Lobibox.js"></script>
    <script src="/js/notifications/notification-active.js"></script>
	
    <script src="/js/tab.js"></script>
    <script src="/js/plugins.js"></script>
    <script src="/js/main.js"></script>
    <!--<script src="/js/tawk-chat.js"></script>-->
	<script>
        $(document).ready(function () {
    
			$("#modal-default").modal("show");
         // $(".select2").select2();
			$("#cpf").mask("000.000.000-00");
			$("#cep").mask("00000-000");
			$("#telefone").mask("(00)00000-0000");
			$("#nascimento").mask("00/00/0000");
			$("#data_batismo").mask("00/00/0000");
          
			$("#cadAlunoNovo").click(function(){
			
				let $select2 = $('#id_modalidade', $(this));
				
				if ($select2.val()== '0') {
					alert()
					e.preventDefault();
					return false;
				  }
				
			
			
			
				let uid_usuario = $("#uid_usuario").val();
				let nome = $("#nome").val();
				let email = $("#email").val();
				let cpf = $("#cpf").val();
				let rg = $("#rg").val();
				let nome_pai = $("#nome_pai").val();
				let nome_mae = $("#nome_mae").val();
				let telefone = $("#telefone").val();
				let nascimento = $("#nascimento").val();
				let denominacao = $("#denominacao").val();
				let data_batismo = $("#data_batismo").val();
				let profissao = $("#profissao").val();
				let escolaridade = $("#escolaridade").val();
				let modalidade = $("#id_modalidade").val();
				let modulo = $("#id_modulo").val();
				let id_nucleo = $("#id_nucleo").val();
				let naturalidade = $("#naturalidade").val();
				let cep = $("#cep").val();
				let endereco = $("#endereco").val();
				let numero = $("#numero").val();
				let complemento = $("#complemento").val();
				let bairro = $("#bairro").val();
				let cidade = $("#cidade").val();
				let uf = $("#uf").val();
				
				console.log(id_nucleo)
				if(modalidade=="0"){
					 Lobibox.notify('error', {
						position: 'top center',
						msg: 'Informe  a Modalidade'
					});
					return;
				}
				if(modulo=="0"){
					Lobibox.notify('error', {
						position: 'top center',
						msg: 'Informe  o Módulo'
					});
					return;
				}
				
				/*
				console.log(nome);
				console.log(email);
				console.log(cpf);
				console.log(rg);
				console.log(nome_pai);
				console.log(nome_mae);
				console.log(telefone);
				console.log(nascimento);
				console.log(denominacao);
				console.log(data_batismo);
				console.log(profissao);
				console.log(escolaridade);
				console.log(modalidade);
				console.log(modulo);
				console.log(naturalidade);
				console.log(cep);
				console.log(endereco);
				console.log(numero);
				console.log(complemento);
				console.log(bairro);
				console.log(cidade);
				console.log(uf);
				*/
				
				
				$.post('/adm/addAluno', {
					uid_usuario: uid_usuario,
					
					nome: nome,
					email: email,
					cpf: cpf,
					rg: rg,
					nome_pai: nome_pai,
					nome_mae: nome_mae,
					telefone: telefone,
					nascimento: nascimento,
					denominacao: denominacao,
					batizado: data_batismo,
					profissao: profissao,
					escolaridade: escolaridade,
					id_modalidade: modalidade,
					id_nucleo : id_nucleo,
					naturalidade: naturalidade,
					id_modulo: modulo,
					cep: cep,
					endereco:endereco,
					numero: numero,
					complemento: complemento,
					bairro: bairro,
					cidade: cidade,
					uf: uf
				}, function(resposta) {
					console.log(resposta)
					if(resposta=="Aluno ja Cadstrado"){
						Lobibox.notify('error', {
							position: 'top center',
							msg: 'Aluno ja Cadstrado com este '+cpf
						});
					}
					
					if(resposta=="Aluno cadastrado com Sucesso"){
						Lobibox.notify('success', {
							position: 'top center',
							msg: resposta
						});
						setTimeout(() => {
							//location.reload(); 
							window.location.href = "/adm/alunos/"+uid_usuario;
						}, "2000");
					}
				});

			})/*
			$("#cadAlunoNovo").click(function(){
				var $select2 = $('#id_modalidade', $(this));
      
				// Reset
				//$select2.parents('.form-group').removeClass('is-invalid');
				if ($select2.val() === '') {
					alert()
					// Add is-invalid class when select2 element is required
					//$select2.parents('.form-group').addClass('is-invalid');
					
					// Stop submiting
					e.preventDefault();
					return false;
				  }
			})*/
		  
		  
          function limpa_formulário_cep() {
            // Limpa valores do formulário de cep.
            $("#endereco").val("");
            $("#bairro").val("");
            $("#cidade").val("");
            $("#uf").val("");
            $("#ibge").val("");
          }
          
		  
		  
		  
          $("#cep").blur(function () {
            //Nova variável "cep" somente com dígitos.
            var cep = $(this).val().replace(/\D/g, "");
    
            //Verifica se campo cep possui valor informado.
            if (cep != "") {
              //Expressão regular para validar o CEP.
              var validacep = /^[0-9]{8}$/;
    
              //Valida o formato do CEP.
              if (validacep.test(cep)) {
                //Preenche os campos com "..." enquanto consulta webservice.
                $("#endereco").val("...");
                $("#bairro").val("...");
                $("#cidade").val("...");
                $("#uf").val("...");
                $("#ibge").val("...");
    
                //Consulta o webservice viacep.com.br/
                $.getJSON(
                  "https://viacep.com.br/ws/" + cep + "/json/?callback=?",
                  function (dados) {
                    if (!("erro" in dados)) {
                      //Atualiza os campos com os valores da consulta.
                      $("#endereco").val(dados.logradouro);
                      $("#bairro").val(dados.bairro);
                      $("#cidade").val(dados.localidade);
                      $("#uf").val(dados.uf);
                      $("#ibge").val(dados.ibge);
                    } //end if.
                    else {
                      //CEP pesquisado não foi encontrado.
                      limpa_formulário_cep();
                      alert("CEP não encontrado.");
                    }
                  }
                );
              } //end if.
              else {
                //cep é inválido.
                limpa_formulário_cep();
                alert("Formato de CEP inválido.");
              }
            } //end if.
            else {
              //cep sem valor, limpa formulário.
              limpa_formulário_cep();
            }
          })
          function getCookie(name) {
              let cookies = document.cookie.split("; ");
              for (let i = 0; i < cookies.length; i++) {
                  let cookie = cookies[i];
                  let [cookieName, cookieValue] = cookie.split("=");
                  if (cookieName === name) {
                      return cookieValue;
                  }
              }
              return null;
          }
          //document.getElementById("user_logado").innerHTML = getCookie("user_logado");
    
          function validar() {
    
              if(document.getElementById("id_modalidade").value ==0) {
                  alert("Maior");
                  return (false);
              }
              else {
                  return (true);
              }
          }
    
      })
      
      </script>
</body>

</html>